{% extends 'base/home.html' %}
{% block content %}
<div>
    <div class="container">
        <div class="row mb-5">
            <div class="col-sm">
                <div class="card bg-secondary text-white mt-2">
                    <h5 class="card-header" style="text-align:center;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                            class="bi bi-journals" viewBox="0 2 20 16">
                            <path
                                d="M5 0h8a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2 2 2 0 0 1-2 2H3a2 2 0 0 1-2-2h1a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1H1a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v9a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1H3a2 2 0 0 1 2-2z" />
                            <path
                                d="M1 6v-.5a.5.5 0 0 1 1 0V6h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0V9h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 2.5v.5H.5a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1H2v-.5a.5.5 0 0 0-1 0z" />
                        </svg> Total Leaves
                    </h5>
                    <div class="card-body" style="text-align:center;">
                        <h5 class="card-title">{{total_leaves}}</h5>
                    </div>
                </div>
            </div>
            <div class="col-sm">
                <div class="card bg-success text-white mt-2">
                    <h5 class="card-header" style="text-align:center;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                            class="bi bi-award-fill" viewBox="0 0 18 18">
                            <path
                                d="m8 0 1.669.864 1.858.282.842 1.68 1.337 1.32L13.4 6l.306 1.854-1.337 1.32-.842 1.68-1.858.282L8 12l-1.669-.864-1.858-.282-.842-1.68-1.337-1.32L2.6 6l-.306-1.854 1.337-1.32.842-1.68L6.331.864 8 0z" />
                            <path d="M4 11.794V16l4-1 4 1v-4.206l-2.018.306L8 13.126 6.018 12.1 4 11.794z" />
                        </svg> No of Granted
                    </h5>
                    <div class="card-body" style="text-align:center;">
                        <h5 class="card-title">{{no_of_leaves_granted}}</h5>
                    </div>
                </div>
            </div>
            <div class="col-sm">
                <div class="card bg-warning text-white mt-2">
                    <h5 class="card-header" style="text-align:center;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                            class="bi bi-hourglass-split" viewBox="0 2 18 16">
                            <path
                                d="M2.5 15a.5.5 0 1 1 0-1h1v-1a4.5 4.5 0 0 1 2.557-4.06c.29-.139.443-.377.443-.59v-.7c0-.213-.154-.451-.443-.59A4.5 4.5 0 0 1 3.5 3V2h-1a.5.5 0 0 1 0-1h11a.5.5 0 0 1 0 1h-1v1a4.5 4.5 0 0 1-2.557 4.06c-.29.139-.443.377-.443.59v.7c0 .213.154.451.443.59A4.5 4.5 0 0 1 12.5 13v1h1a.5.5 0 0 1 0 1h-11zm2-13v1c0 .537.12 1.045.337 1.5h6.326c.216-.455.337-.963.337-1.5V2h-7zm3 6.35c0 .701-.478 1.236-1.011 1.492A3.5 3.5 0 0 0 4.5 13s.866-1.299 3-1.48V8.35zm1 0v3.17c2.134.181 3 1.48 3 1.48a3.5 3.5 0 0 0-1.989-3.158C8.978 9.586 8.5 9.052 8.5 8.351z" />
                        </svg> No of Pending
                    </h5>
                    <div class="card-body" style="text-align:center;">
                        <h5 class="card-title">{{no_of_leaves_pending}}</h5>
                    </div>
                </div>
            </div>
            <div class="col-sm">
                <div class="card bg-danger text-white mt-2">
                    <h5 class="card-header" style="text-align:center;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                            class="bi bi-exclamation-triangle-fill" viewBox="0 2 18 16">
                            <path
                                d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z" />
                        </svg> No of Declined
                    </h5>
                    <div class="card-body" style="text-align:center;">
                        <h5 class="card-title">{{no_of_leaves_declined}}</h5>
                    </div>
                </div>
            </div>
        </div>
        <button class="btn btn-outline-primary mb-4" onclick="showDiv()">More info</button>
        <div class="col-lg-4 col-sm-12" id="moredata" style="display:none;">
            <table class="table table-dark table-striped table-bordered table-hover">
                <thead>
                    <tr>
                        <th scope="col bg-success" colspan="2">Featured</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th scope="row">No of Teaching Staff Applied</th>
                        <td>{{no_of_teaching_leaves}}</td>
                    </tr>
                    <tr>
                        <th scope="row">No of Non-Teaching Staff Applied</th>
                        <td>{{no_of_non_teaching_leaves}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <br />
        <h3 class="badge bg-danger p-2">Teaching Staff</h3>
        <div class="col">
            <table class="table table-bordered table-hover rounded">
                <thead class="thead-light bg-info text-white">
                    <tr>
                        <th scope="col">E_Id</th>
                        <th scope="col">First Name</th>
                        <th scope="col">Last Name</th>
                        <th scope="col">Leave Type</th>
                        <th scope="col">Requested Days</th>
                        <th scope="col">Leave Status</th>
                        <th scope="col">Grant</th>
                        <th scope="col">Decline</th>
                    </tr>
                </thead>
                <tbody>
                    {% for teacher in teaching_list %}
                    {% for leave in teacher %}
                    <tr>
                        <td>{{leave.e_id}}</td>
                        <td>{{leave.first_name}}</td>
                        <td>{{leave.last_name}}</td>
                        <td>{{leave.leave_type}}</td>
                        <td>{{leave.requested_days}}</td>
                        <td>{{leave.leave_Status}}</td>
                        <td><button class="btn btn-outline-success">Accept</button></td>
                        <td><button class="btn btn-outline-danger">Reject</button></td>
                    </tr>
                    {%endfor%}
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <h3 class="badge bg-danger p-2">Non-Teaching Staff</h3>
        <div class="col">
            <table class="table table-bordered table-hover rounded">
                <thead class="thead-light bg-info text-white">
                    <tr>
                        <th scope="col">E_Id</th>
                        <th scope="col">First Name</th>
                        <th scope="col">Last Name</th>
                        <th scope="col">Leave Type</th>
                        <th scope="col">Requested Days</th>
                        <th scope="col">Leave Status</th>
                        <th scope="col">Grant</th>
                        <th scope="col">Decline</th>
                    </tr>
                </thead>
                <tbody>
                    {% for person in non_teaching_list %}
                    {% for leave in person %}
                    <tr>
                        <td>{{leave.e_id}}</td>
                        <td>{{leave.first_name}}</td>
                        <td>{{leave.last_name}}</td>
                        <td>{{leave.leave_type}}</td>
                        <td>{{leave.requested_days}}</td>
                        <td>{{leave.leave_Status}}</td>
                        <td><button class="btn btn-outline-success">Accept</button></td>
                        <td><button class="btn btn-outline-danger">Reject</button></td>
                    </tr>
                    {%endfor%}
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <script>
        function showDiv() {
            if (document.getElementById('moredata').style.display == "none") {
                document.getElementById('moredata').style.display = "block";
            }
            else {
                document.getElementById('moredata').style.display = "none";
            }
        }
    </script>
</div>
{% endblock %}